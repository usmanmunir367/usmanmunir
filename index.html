<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Usman Munir â€” Hydrologist (Single Page)</title>
  <style>
:root {
  --bg: #0b1020;
  --card: #101933;
  --text: #e9eefc;
  --muted: #9fb2d9;
  --accent: #4ea8ff;
  --accent-2: #7af0b1;
}
* {box-sizing: border-box}
html, body {margin:0; padding:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}
body {background: var(--bg); color: var(--text); line-height: 1.6;}
a {color: var(--accent); text-decoration: none}
.container{max-width: 1100px; margin: 0 auto; padding: 18px}
nav{position: sticky; top: 0; backdrop-filter: blur(6px); background: rgba(11,16,32,0.7); border-bottom: 1px solid rgba(255,255,255,0.06); z-index: 100}
.navbar{display:flex; align-items:center; gap:18px}
.navbar .brand{display:flex; align-items:center; gap:10px; font-weight: 700}
.brand img{width:36px; height:36px; border-radius:50%; object-fit:cover; border: 2px solid rgba(255,255,255,0.15)}
nav ul{display:flex; gap:14px; list-style:none; margin:0; padding:0; flex-wrap: wrap}
nav ul a{padding:10px 12px; border-radius: 12px; display:inline-block}
nav ul a:hover{background: rgba(255,255,255,0.06)}
.header{display:grid; grid-template-columns: 1.2fr 0.8fr; gap:30px; padding: 28px 0 10px}
.header .card{background: var(--card); padding: 24px; border-radius: 18px; box-shadow: 0 10px 24px rgba(0,0,0,.25)}
h1{margin:0 0 10px 0; font-size: 40px; line-height: 1.15;}
h2{margin-top: 24px}
.badges{display:flex; gap:8px; flex-wrap:wrap}
.badge{background: rgba(255,255,255,0.06); color: var(--muted); padding: 6px 10px; border-radius: 9999px; font-size: 12px}
.cta{display:flex; gap:10px; flex-wrap:wrap; margin-top: 16px}
.btn{background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #00111f; padding: 12px 14px; border-radius: 12px; font-weight: 700; display:inline-flex; align-items:center; gap:8px}
.btn.secondary{background: rgba(255,255,255,0.09); color: var(--text); border: 1px solid rgba(255,255,255,0.08)}
.hero-photo{border-radius: 18px; width:100%; height: 100%; object-fit: cover; box-shadow: 0 10px 24px rgba(0,0,0,.25)}
.grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:18px}
.card{background: var(--card); padding: 18px; border-radius: 18px; box-shadow: 0 8px 18px rgba(0,0,0,.25)}
footer{border-top: 1px solid rgba(255,255,255,0.06); margin-top: 28px}
.small{font-size: 13px; color: var(--muted)}
.theme-toggle{margin-left:auto; cursor:pointer; border:1px solid rgba(255,255,255,0.12); border-radius: 10px; padding: 8px 10px}
/* wave bar */
.wave{position:relative; height: 9px; background: linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius: 999px; overflow:hidden; margin: 10px 0 0}
.wave::after{content:""; position:absolute; top: -6px; left:-100%; width: 40%; height: 20px; background: rgba(255,255,255,0.6); filter: blur(8px); animation: flow 2.6s infinite linear}
@keyframes flow{to{left:160%}}
/* dark/light */
.light{
  --bg: #f6f9ff;
  --card: #ffffff;
  --text: #0a0f1f;
  --muted: #4c5c7a;
  --accent: #0057ff;
  --accent-2: #00d28f;
}
/* make header readable in light mode */
.light nav{ background: rgba(255,255,255,0.92); border-bottom: 1px solid rgba(0,0,0,0.06); }
.light .navbar .brand{ color:#0a0f1f }
.light nav ul a{ color:#0a0f1f }
.light nav ul a:hover{ background: rgba(0,0,0,0.06) }
/* Timeline */
.timeline{position:relative; margin: 12px 0 8px}
.timeline::before{content:""; position:absolute; top:20px; left:0; right:0; height:2px; background: linear-gradient(90deg, rgba(255,255,255,0.14), rgba(255,255,255,0.32)); border-radius:999px}
.edu-grid{display:grid; grid-template-columns: repeat(3, minmax(240px,1fr)); gap:26px}
.edu-card{background: var(--card); border-radius:18px; padding:18px; box-shadow: 0 8px 18px rgba(0,0,0,.25)}
.edu-head{display:flex; align-items:center; gap:10px; margin-bottom:10px}
.dot{width:10px; height:10px; background: var(--accent); border-radius:50%; box-shadow: 0 0 0 4px rgba(78,168,255,.15)}
.edu-title{font-weight:800}
.edu-range{color: var(--muted); font-weight:600}
.edu-sub{margin-top:2px; color: var(--muted)}
@media (max-width: 900px){ .edu-grid{grid-template-columns: 1fr} .timeline::before{display:none} }
/* socials in footer */
.socials{display:inline-flex; gap:12px; margin-left:10px; flex-wrap:wrap}
.socials a{padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.12); color:var(--text)}
.socials a:hover{background:rgba(255,255,255,0.08)}
  </style>
</head>
<body>
<nav>
  <div class="container navbar">
    <div class="brand">
      <img src="assets/profile.jpg" alt="Profile photo" />
      <span>M. Usman Munir</span>
    </div>
    <ul>
      <li><a href="#home" data-nav>Home</a></li>
      <li><a href="#about" data-nav>About</a></li>
      <li><a href="#education" data-nav>Education</a></li>
      <li><a href="#research" data-nav>Research</a></li>
      <li><a href="#publications" data-nav>Publications</a></li>
      <li><a href="#playground" data-nav>Playground</a></li>
      <li><a href="#contact" data-nav>Contact</a></li>
    </ul>
    <button class="theme-toggle"></button>
  </div>
</nav>

<main id="spa-root">
  <!-- Home -->
  <section id="home" class="spa-page">
    <section class="container header">
      <div class="card">
        <h1>Hi, I'm <span style="background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent">Muhammad Usman Munir</span> â€” Hydrologist</h1>
        <p class="small">Quantitative hydrology â€¢ surfaceâ€“groundwater interactions â€¢ integrated modeling (HydroGeoSphere, SWAT) â€¢ climate-change impacts</p>
        <div class="badges">
          <span class="badge">Research Associate @ University of Bayreuth</span>
          <span class="badge">Python â€¢ R â€¢ QGIS</span>
          <span class="badge">Process-based & data-driven modeling</span>
        </div>
        <div class="cta">
          <a class="btn" href="#about" data-nav>Explore my work â†’</a>
          <a class="btn secondary" id="cvLink" href="#">Download CV</a>
        </div>
        <div class="wave"></div>
      </div>
      <div class="card">
        <img class="hero-photo" src="assets/profile.jpg" alt="Portrait of Muhammad Usman Munir" />
      </div>
    </section>

    <section class="container grid">
      <div class="card">
        <h3>What I do</h3>
        <p>I build and use integrated models to understand the full water cycle, quantify groundwaterâ€“surface water exchange, and assess local climate impacts on headwater catchments.</p>
      </div>
      <div class="card">
        <h3>Featured paper (2024)</h3>
        <p><em>Understanding the vulnerability of surfaceâ€“groundwater interactions to climate change: insights from a Bavarian Forest headwater catchment</em></p>
        <a href="#publications" data-nav>See publications â†’</a>
      </div>
      <div class="card">
        <h3>Interactive demos</h3>
        <p>Try a toy rainfallâ€“runoff model and visualize hydrographs in the <a href="#playground" data-nav>Playground</a>.</p>
      </div>
    </section>
  </section>
  
  <!-- About -->
  <section id="about" class="spa-page" hidden>
    <section class="container">
      <div class="grid">
        <div class="card">
          <h2>About</h2>
          <p>I am a hydrologist focused on the interactions between surface water and groundwater and their sensitivity to climate change. I combine field data with physics-based models (e.g., HydroGeoSphere) and geospatial analysis to deliver actionable insight for water resources.</p>
          <p><strong>Core skills</strong>: HydroGeoSphere, SWAT, QGIS, Python, R, transport & process-based modeling, data visualization.</p>
        </div>
        <div class="card">
          <h2>What hydrologists typically do</h2>
          <ul>
            <li>Measure and analyze streamflow, precipitation, groundwater levels, and water quality.</li>
            <li>Collect and test water/soil samples; model floods, droughts, and contaminant transport.</li>
            <li>Forecast water supply and assess environmental impacts; propose mitigation strategies.</li>
          </ul>
          <p class="small">Source highlights: BLS Occupational Outlook for Hydrologists; DOE Hydrologist role overview.</p>
        </div>
        <div class="card">
          <h2>Tech I use</h2>
          <ul>
            <li>HydroGeoSphere for fully integrated surfaceâ€“subsurface flow & transport.</li>
            <li>Python/R for analysis and plotting; QGIS for spatial workflows.</li>
          </ul>
        </div>
      </div>
    </section>
  </section>

  <!-- Education -->
  <section id="education" class="spa-page" hidden>
    <section class="container">
      <h1>Education</h1>
      <div class="timeline"></div>
      <div class="edu-grid">
        <div class="edu-card">
          <div class="edu-head"><span class="dot"></span><div><div class="edu-range">2018 â€“ 2024</div><div class="edu-title">PhD, Hydrology</div></div></div>
          <div><strong>University of Bayreuth</strong><div class="edu-sub">Bayreuth, Germany</div></div>
          <p>Dissertation (submitted): <em>Surface-Groundwater Interactions and Climate Change Impacts: An Integrated Approach using HydroGeoSphere</em>. Focus on coupled modeling, climate scenarios, and headwater catchments.</p>
        </div>
        <div class="edu-card">
          <div class="edu-head"><span class="dot"></span><div><div class="edu-range">2013 â€“ 2015</div><div class="edu-title">M.Sc. (Hons.) Agricultural Engineering â€” Irrigation & Drainage</div></div></div>
          <div><strong>University of Agriculture, Faisalabad</strong><div class="edu-sub">Punjab, Pakistan</div></div>
          <p>Hydrology & water resources, groundwater modeling, statistics for water systems, and GIS.</p>
        </div>
        <div class="edu-card">
          <div class="edu-head"><span class="dot"></span><div><div class="edu-range">2009 â€“ 2013</div><div class="edu-title">B.Sc. Agricultural Engineering</div></div></div>
          <div><strong>University of Agriculture, Faisalabad</strong><div class="edu-sub">Punjab, Pakistan</div></div>
          <p>Hydraulics, irrigation design, watershed management, environmental engineering.</p>
        </div>
      </div>
      <p class="small" style="margin-top:10px">Details are summarized for web; the full record is available in the CV.</p>
    </section>
  </section>

  <!-- Research -->
  <section id="research" class="spa-page" hidden>
    <section class="container">
      <div class="grid">
        <div class="card">
          <h2>Research Focus</h2>
          <p>Surfaceâ€“groundwater interactions under changing climate in Central European headwaters; vulnerability analysis and scenario modeling.</p>
          <p>PhD thesis: <em>Surface-Groundwater Interactions and Climate Change Impacts: An Integrated Approach using HydroGeoSphere</em>.</p>
        </div>
        <div class="card">
          <h2>Models & Methods</h2>
          <ul>
            <li>HydroGeoSphere (3D integrated hydrologic model) for coupled flow and transport.</li>
            <li>SWAT for catchment-scale hydrology; radon-222 as natural tracer.</li>
            <li>Physics-informed ML for submarine groundwater discharge (ongoing).</li>
          </ul>
        </div>
        <div class="card">
          <h2>Projects</h2>
          <p><strong>AQUAKLIF-TP5</strong> â€” Predicting behavior of small catchments under local climate change (2018â€“2021).</p>
        </div>
      </div>
    </section>
  </section>

  <!-- Publications -->
  <section id="publications" class="spa-page" hidden>
    <section class="container">
      <div class="card">
        <h2>Selected Publications</h2>
        <ol>
          <li>Munir, M. U., Blaurock, K., & Frei, S. (2024). <em>Understanding the vulnerability of surfaceâ€“groundwater interactions to climate change</em>. <span class="small">Engineering Geology / Environmental Earth Sciences</span></li>
          <li>Munir, M. U., Gilfedder, B. S., & Frei, S. <em>Runoff Generation and Groundwater Interactions in a Central European Headwater Catchment</em> â€” under review.</li>
          <li>Frei, S., Munir, M. U., et al. <em>Using Physics-Informed Neural Networks to Quantify Submarine Groundwater Discharge</em> â€” under review.</li>
        </ol>
        <h3>Talks & Conferences</h3>
        <ul>
          <li>EGU 2022 â€” Impact of local climate change on groundwater resources.</li>
          <li>AGU 2021 â€” Session presentation.</li>
          <li>EGU 2021 â€” Session presentation.</li>
        </ul>
      </div>
    </section>
  </section>

  <!-- Playground -->
  <section id="playground" class="spa-page" hidden>
    <section class="container">
      <div class="grid">
        <div class="card">
          <h2>Rainfall â†’ Runoff (toy model)</h2>
          <p>Adjust rainfall and infiltration to see a simplified hydrograph. This is a minimal educational demo.</p>
          <label>Rainfall Intensity (mm/hr): <input id="rain" type="range" min="0" max="80" value="30" oninput="runModel()"></label>
          <br/>
          <label>Infiltration (mm/hr): <input id="inf" type="range" min="0" max="40" value="10" oninput="runModel()"></label>
          <canvas id="chart" height="160"></canvas>
        </div>
        <div class="card">
          <h2>How it's computed</h2>
          <p>We simulate 24 hours at 15-min steps. Effective rainfall = max(0, rainfall âˆ’ infiltration). Discharge is a simple linear reservoir with constant celerity (k = 0.35). Not for real-world use â˜º.</p>
        </div>
      </div>
    </section>
    <script>
      let chart;
      function runModel(){
        const P = Number(document.getElementById('rain').value);
        const f = Number(document.getElementById('inf').value);
        const dt = 0.25; // 15 min
        const n = Math.round(24/dt);
        let q = 0, k = 0.35;
        const t=[], Qin=[], Qout=[];
        for(let i=0;i<n;i++){
          const time = i*dt;
          const Pe = Math.max(0, P - f); // mm/hr
          const inflow = (Pe/3600.0) * 1e6; // arbitrary scaling for visualization
          q = q + dt*(inflow - k*q);
          t.push(time.toFixed(2));
          Qin.push(Pe);
          Qout.push(q/1e6);
        }
        const data = {
          labels: t,
          datasets: [
            {label:'Effective Rainfall (mm/hr)', data: Qin, yAxisID:'y', type:'bar'},
            {label:'Outflow (arb.)', data: Qout, yAxisID:'y1', type:'line', tension:0.3}
          ]
        };
        const cfg = {
          data, 
          options:{
            responsive:true,
            scales:{ y:{position:'left', beginAtZero:true}, y1:{position:'right', beginAtZero:true} }
          }
        };
        if(chart){ chart.destroy(); }
        chart = new Chart(document.getElementById('chart'), cfg);
      }
      document.addEventListener('DOMContentLoaded', runModel);
    </script>
    <section class="container">
      <div class="grid">
        <div class="card">
          <h2>Climate Scenarios: Warming by 2050</h2>
          <p>Select a scenario or enter a custom 2020â€“2050 cumulative COâ‚‚ emissions value (GtCOâ‚‚). The chart shows a central estimate with a low/high range using an illustrative TCRE.</p>
          <label>Scenario:
            <select id="sspSelect" onchange="runScenarios()">
              <option>SSP1-1.9</option>
              <option>SSP1-2.6</option>
              <option>SSP2-4.5</option>
              <option>SSP3-7.0</option>
              <option>SSP5-8.5</option>
              <option>Custom</option>
            </select>
          </label>
          <br/>
          <label>Custom cumulative emissions (GtCOâ‚‚): <input id="customEmis" type="range" min="0" max="1800" step="10" value="600" oninput="document.getElementById('emisVal').innerText=this.value; runScenarios()"></label>
          <div class="small">Value: <span id="emisVal">600</span> GtCOâ‚‚</div>
          <canvas id="sspChart" height="170"></canvas>
          <p class="small">Educational demo inspired by IPCC AR6 figure (near-linear warming vs cumulative COâ‚‚). Values are approximate for interactive exploration.</p>
        </div>
        <div class="card">
          <h2>What is TCRE?</h2>
          <p>The transient climate response to cumulative carbon emissions (TCRE) links global warming to total COâ‚‚ emitted. This simplified tool uses a central estimate of 0.45&nbsp;Â°C per 1000&nbsp;GtCOâ‚‚ with a low/high range to reflect uncertainty.</p>
        </div>
      </div>
    </section>
  </section>

  <!-- Contact -->
  <section id="contact" class="spa-page" hidden>
    <section class="container">
      <div class="grid">
        <div class="card">
          <h2>Contact</h2>
          <p>Send a direct message using the form below â€” it will go straight to my inbox.</p>
          <form id="contactForm" method="POST">
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
              <div>
                <label>Name</label>
                <input name="name" required placeholder="Your name" style="width:100%; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.15); background:transparent; color:var(--text)">
              </div>
              <div>
                <label>Email</label>
                <input name="email" type="email" required placeholder="you@example.com" style="width:100%; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.15); background:transparent; color:var(--text)">
              </div>
            </div>
            <div style="margin-top:10px">
              <label>Subject</label>
              <input name="subject" required placeholder="How can I help?" style="width:100%; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.15); background:transparent; color:var(--text)">
            </div>
            <div style="margin-top:10px">
              <label>Message</label>
              <textarea name="message" required style="width:100%; min-height:140px; border-radius:12px; border:1px solid rgba(255,255,255,0.15); padding:10px; background:transparent; color:var(--text)"></textarea>
            </div>
            <input type="text" name="_honey" style="display:none">
            <div style="display:flex; align-items:center; gap:10px; margin-top:12px">
              <button class="btn" type="submit">Send Message</button>
              <span id="formStatus" class="small"></span>
            </div>
          </form>
          <p class="small" style="margin-top:8px">No server needed â€” this form uses a secure email relay. If you're self-hosting, you can switch to your own endpoint later.</p>
        </div>
        <div class="card">
          <h2>Elsewhere on the web</h2>
          <div class="badges">
            <a class="btn secondary" href="https://www.researchgate.net/profile/Muhammad-Munir-40?ev=hdr_xprf" target="_blank" rel="noopener">ResearchGate â†—</a>
            <a class="btn secondary" href="https://scholar.google.com/citations?user=j9Umt68AAAAJ&hl=en" target="_blank" rel="noopener">Google Scholar â†—</a>
            <a class="btn secondary" href="https://www.linkedin.com/in/usman-munir-4b973077/" target="_blank" rel="noopener">LinkedIn â†—</a>
          </div>
          <h3>Prefer email?</h3>
          <p><strong>Email:</strong> <a id="email"></a></p>
        </div>
      </div>
    </section>
  </section>
</main>

<footer>
  <div class="container small">
    Â© <span id="year"></span> Usman Munir â€¢ Hydrology & Water Resources â€¢ <span class="socials">
      <a href="https://www.researchgate.net/profile/Muhammad-Munir-40?ev=hdr_xprf" target="_blank" rel="noopener">ResearchGate</a>
      <a href="https://scholar.google.com/citations?user=j9Umt68AAAAJ&hl=en" target="_blank" rel="noopener">Google Scholar</a>
      <a href="https://www.linkedin.com/in/usman-munir-4b973077/" target="_blank" rel="noopener">LinkedIn</a>
    </span>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
// Theme toggle + remember
const toggle = document.querySelector('.theme-toggle');
const lsKey = 'site-theme';
const preferred = localStorage.getItem(lsKey) || 'dark';
if(preferred === 'light'){ document.documentElement.classList.add('light'); }
toggle.addEventListener('click', () => {
  document.documentElement.classList.toggle('light');
  const mode = document.documentElement.classList.contains('light') ? 'light' : 'dark';
  localStorage.setItem(lsKey, mode);
  toggle.innerText = mode === 'light' ? 'ðŸŒž Light' : 'ðŸŒ™ Dark';
});
toggle.innerText = document.documentElement.classList.contains('light') ? 'ðŸŒž Light' : 'ðŸŒ™ Dark';

// Scroll reveal
const reveal = () => {
  document.querySelectorAll('.card').forEach(el => {
    const rect = el.getBoundingClientRect();
    if(rect.top < window.innerHeight - 40){ el.style.transform='translateY(0)'; el.style.opacity=1; }
  });
}
// Apply initial styles first, then reveal (prevents blink/disappear)
document.querySelectorAll('.card').forEach(el => { el.style.transform='translateY(12px)'; el.style.opacity=0; el.style.transition='all .6s ease'; });
reveal();
window.addEventListener('scroll', reveal);

// SPA navigation
function showPage(id){ 
  document.querySelectorAll('.spa-page').forEach(sec => sec.hidden = true);
  const el = document.getElementById(id) || document.getElementById('home');
  el.hidden = false;
  reveal();
  window.scrollTo({ top: 0, behavior: 'instant' });
}
window.addEventListener('hashchange', () => showPage(location.hash.replace('#','') || 'home'));
document.querySelectorAll('a[data-nav]').forEach(a => a.addEventListener('click', (e)=>{
  const target = a.getAttribute('href').replace('#','');
  showPage(target);
}));
showPage(location.hash.replace('#','') || 'home');

// Email obfuscation
const emSpan = document.querySelector('#email');
if(emSpan){
  emSpan.innerHTML = ['muhammad.munir','uni-bayreuth.de'].join('@');
  emSpan.href = 'mailto:' + emSpan.innerHTML;
}

// Contact form handler using FormSubmit
(function(){
  const form = document.getElementById('contactForm');
  const status = document.getElementById('formStatus');
  if(!form) return;
  const user = 'muhammad.munir';
  const host = 'uni-bayreuth.de';
  const endpoint = 'https://formsubmit.co/ajax/' + [user, host].join('@');
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    status.textContent = 'Sendingâ€¦';
    try{
      const fd = new FormData(form);
      fd.append('_subject', 'New message from website');
      fd.append('_captcha','false');
      const res = await fetch(endpoint, { method:'POST', body: fd });
      if(res.ok){
        form.reset();
        status.textContent = 'Thank you! Your message was sent.';
      }else{
        status.textContent = 'Could not send (service blocked). Opening your email client as fallbackâ€¦';
        setTimeout(()=>{ window.location = 'mailto:' + [user, host].join('@'); }, 600);
      }
    }catch(err){
      status.textContent = 'Network error. Opening your email client as fallbackâ€¦';
      setTimeout(()=>{ window.location = 'mailto:' + [user, host].join('@'); }, 600);
    }
  });
})();

// === Climate Scenarios Playground ===
function runScenarios(){
  const TCRE_mid = 0.45; // Â°C per 1000 GtCO2
  const TCRE_low = 0.27, TCRE_high = 0.63;
  const baseWarming = 1.1; // approx. warming to 2019â€“2020 baseline

  const scenarios = {
    "SSP1-1.9": 300,  // illustrative cumulative 2020-2050 GtCO2
    "SSP1-2.6": 500,
    "SSP2-4.5": 800,
    "SSP3-7.0": 1100,
    "SSP5-8.5": 1400
  };
  const sel = document.getElementById('sspSelect');
  if(!sel) return;

  const chosen = sel.value;
  const custom = Number(document.getElementById('customEmis').value);
  const emis = chosen === 'Custom' ? custom : scenarios[chosen];

  const dt_mid = baseWarming + (emis/1000)*TCRE_mid;
  const dt_lo = baseWarming + (emis/1000)*TCRE_low;
  const dt_hi = baseWarming + (emis/1000)*TCRE_high;

  const ctx = document.getElementById('sspChart');
  if(!ctx) return;
  if(window._sspChart){ window._sspChart.destroy(); }
  window._sspChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['1850','1900','1950','2000','2020','2030','2040','2050'],
      datasets: [
        {label:'Central estimate', data:[0,0.2,0.4,0.9,1.1, (1.1+ (emis/3000)), (1.1+ 2*(emis/3000)), dt_mid], borderWidth:2},
        {label:'Low TCRE', data:[0,0.15,0.3,0.7,1.0, 1.0 + (emis/1000)*0.09, 1.0 + (emis/1000)*0.18, dt_lo], borderDash:[6,6], borderWidth:2},
        {label:'High TCRE', data:[0,0.25,0.55,1.0,1.2, 1.2 + (emis/1000)*0.12, 1.2 + (emis/1000)*0.24, dt_hi], borderWidth:2}
      ]
    },
    options: {
      responsive:true,
      animation:{duration:600},
      scales:{y:{beginAtZero:true, title:{display:true, text:'Global mean temperature (Â°C above 1850â€“1900)'}}, x:{title:{display:true, text:'Time'}}},
      plugins:{legend:{position:'bottom'}}
    }
  });
}
document.addEventListener('input', runScenarios);
document.addEventListener('DOMContentLoaded', runScenarios);

</script>

</body>
</html>
